!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("react"));else if("function"==typeof define&&define.amd)define(["react"],t);else{var o=t("object"==typeof exports?require("react"):e.React);for(var n in o)("object"==typeof exports?exports:e)[n]=o[n]}}(this,function(e){return function(e){function t(n){if(o[n])return o[n].exports;var r=o[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var o={};return t.m=e,t.c=o,t.p="",t(0)}([function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(1),i=n(r);t["default"]=i["default"]},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},l=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),p=o(2),u=n(p),d=function(e){function t(e){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.startVideoStateObserver=function(e){o.currentVideoReady()&&o.callChangeHandlers(),o.stopObserver||window.requestAnimationFrame(o.startVideoStateObserver)},o.stopVideoStateObserver=function(){o.stopObserver=!0},o.onPlayerReady=function(){(o.props.shouldPrestart||o.props.playing)&&(o.player.playVideo(),o.prestart=!o.props.playing),o.props.onReady({duration:1e3*o.player.getDuration()}),o.setPlayerVolume(o.props.volume),o.startVideoStateObserver()},o.onNewVideoLoaded=function(){o.onPlayerReady(),o.props.playing?o.setVideoPlaying():(o.player.pauseVideo(),o.prestart=!1),o.loadingNewVideo=!1},o.setVideoPlaying=function(){(o.props.shouldPrestart||o.props.playing)&&o.prestart?(o.player.pauseVideo(),o.prestart=!1):o.props.onPlayingChange(!0)},o.onPlayerStateChange=function(e){var t=e.data,n=YT.PlayerState,r=n.PLAYING,i=n.PAUSED,a=n.BUFFERING,s=n.ENDED;switch(t){case r:o.loadingNewVideo?o.onNewVideoLoaded():o.setVideoPlaying();break;case i:o.props.onPlayingChange(!1);break;case a:break;case s:o.props.onPlayingChange(!1)}},o.initializePlayer=function(){var e=o.props,t=e.videoId,n=e.width,r=e.height,i=e.playerVars;o.player=new YT.Player(o.refs.player,{videoId:t,width:n,height:r,playerVars:s({start:o.props.position/1e3},i),events:{onReady:o.onPlayerReady,onStateChange:o.onPlayerStateChange}})},o.player=null,o.onProgressTimer=null,o.loadingNewVideo=!1,o.lastSentPosition=0,o.lastSentVolume=0,o}return a(t,e),l(t,null,[{key:"defaultProps",get:function(){return{position:0,width:"560",height:"315",playing:!1,volume:50,shouldPrestart:!0,minPositionChangeToNotify:100,onProgress:function(){},onPlayingChange:function(){},onReady:function(){},onVolumeChange:function(){},playerVars:{}}}}]),l(t,[{key:"getCurrentTimeInMs",value:function(){return 1e3*this.player.getCurrentTime()}},{key:"callChangeHandlers",value:function(){var e=this.getCurrentTimeInMs(),t=this.player.isMuted()?0:this.player.getVolume();this.lastSentVolume!=t&&(this.lastSentVolume=t,this.props.onVolumeChange(t)),Math.abs(this.lastSentPosition-e)>this.props.minPositionChangeToNotify&&(this.lastSentPosition=e,this.props.onProgress(e))}},{key:"componentWillUnmount",value:function(){this.stopVideoStateObserver()}},{key:"currentVideoReady",value:function(){return this.player&&!isNaN(this.getCurrentTimeInMs())}},{key:"componentDidMount",value:function(){var e=this;"undefined"!=typeof YT&&YT.loaded?this.initializePlayer():!function(){var t=window.onYouTubePlayerAPIReady;window.onYouTubePlayerAPIReady=function(){t&&t(),e.initializePlayer()}}()}},{key:"setPlayerVolume",value:function(e){e>0&&this.player.unMute(),0===e?this.player.mute():this.player.setVolume(e)}},{key:"componentDidUpdate",value:function(e){e.videoId!==this.props.videoId&&(this.player?(this.loadingNewVideo=!0,this.player.loadVideoById(this.props.videoId)):this.initializePlayer()),e.volume!==this.props.volume&&this.setPlayerVolume(this.props.volume),this.lastSentPosition!==this.props.position&&this.player.seekTo(this.props.position/1e3,!0),e.playing===!1&&this.props.playing===!0&&this.player.playVideo(),e.playing===!0&&this.props.playing===!1&&this.player.pauseVideo()}},{key:"render",value:function(){return u["default"].createElement("div",{className:"video"},u["default"].createElement("div",{className:"content"},u["default"].createElement("div",{ref:"player"})))}}]),t}(p.Component);t["default"]=d},function(t,o){t.exports=e}])});